<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jonathan Wheeler">
<meta name="dcterms.date" content="2024-10-05">

<title>John the Revelator – Bible Study Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Bible Study Notes</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jondoesntgit"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/jondoesnttweet"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">John the Revelator</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">john</div>
                <div class="quarto-category">bio</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Jonathan Wheeler </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 5, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>This post contains some unorganized notes on who John was. He was likely the youngest of the 12 disciples, and likely one of the disciples who was directly related to Jesus (Mary was John’s biological aunt).</p>
<section id="jesus-family-tree" class="level2">
<h2 class="anchored" data-anchor-id="jesus-family-tree">Jesus’ Family Tree</h2>
<p>The following diagram illustrates my best guess at the family tree of Jesus. It makes the assumption that James was an older step-brother of Jesus from a wife Joseph had before Mary. There are two other hypotheses: the first assumes that James is a half-brother of Jesus through Mary (which I think is unlikely because Jesus on the cross entrusts Mary to John and not to James, more on this below), and the other assumes that James is the cousin of Jesus through Joseph’s brother Cleopas (which seems possible given the similarities in the names of Cleopas’ children in John 19:25; Matthew 27:56; Mark 15:40 and the listing of Jesus’ “brethren” in Matthew 13:55; Mark 6:3, though <a href="https://www.adventistbiblicalresearch.org/materials/jesus-family-ties/">the use of “brother” to mean “cousin” is rare</a>). I believe Ellen White favors the interpretation that these were older step-brothers (DA 86.2, 87.2)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="family-tree.svg" class="img-fluid figure-img"></p>
<figcaption>Family tree of Jesus</figcaption>
</figure>
</div>
<p>A few more notes justifying this set up, moving left to right</p>
<ol type="1">
<li><strong>Other Mary:</strong> Three women are listed at the cross (John 19:25, Mark 15:40, ): Jesus’ mom. All three women went to the tomb to embalm Jesus (Matthew 28:1-10, Mark 16:1-8, Luke 24:1-2, John 20:1-8). She is listed as the mother of James and Joses</li>
<li><strong>Cleopas:</strong> also Clopas. This is the man that Jesus appeared to on the road to Emmaus. According to the Jewish Encyclopedia, the nearest relatives were supposed to bury the body of a deceased relative. Assuming that Joseph was dead during Jesus’ ministry, Cleopas would have been the oldest male relative.<br>

<blockquote class="blockquote">
As soon as the last breath was drawn, the eyes of the dead were closed by the oldest or most distinguished son or next relative (Gen.&nbsp;xlvi. 4), the mouth was shut, and kept in position by a band on the cheek-bonesw, and the body placed upon sand or salt on the floor to retard decompsition, metal or glass being put upon the navel to prevent swelling. Then the body waswashed and anointed with aromatic unguents, and wrapped in linen cloths (Shab. xxiii. 5; Sem. i. 2, 3; Acts ix. 37; John xi. 44, xii. 7, xix. 39 et seq., xx. 6 et seq.; Matt. xxvii. 59; Mark xv. 46 et seq.; Luke xxiii3 53 et seq; Testament of Abraham, xx.).<br>
<cite>Throwing Earth Upon a Coffin, Picart, 1723</cite>
</blockquote></li>
<li><strong>Joseph’s first wife:</strong> It’s likely that Mary was Joseph’s second wife, after his first wife had passed away. The reason for beliving this is that. Ellen White in Desire of Ages wrote that they were his older brothers (DA 87.2), and Jesus was Mary’s firstborn son (Matthew 1:25). Therefore, these brothers were either through Joseph’s earlier marriage, or perhaps they were children of Cleopas. Eusebius of Caesarea quotes Hegesippus, who wrote c.&nbsp;AD 180 that he interviewed the grandsons of Jude the Apostle and learned Clopas was the brother of Jesus, husband of Mary:
<blockquote class="blockquote">
After the martyrdom of James, it was unanimously decided that Simeon, son of Clopas, was worthy to occupy the see of Jerusalem. He was, it is said, a cousin of the Saviour.<cite> <a href="https://www.newadvent.org/fathers/250103.htm">Eusebius of Caesarea, Church History, Book III, ch.&nbsp;11.</a></cite>
</blockquote></li>
<li><strong>Salome:</strong> Using similar logic to the Other Mary, Salome can be identified as Jesus’ mother’s sister, and the mother of the children of Zebedee. When Jesus was dying on the cross, he entrusted the care of his mother to John the disciple (John 19:25-27). If Mary were the mother of Jesus’ brother James, then Jesus would not have had to commit her care to John, since James would care for Mary. However, if James were a stepson of Mary, perhaps it made more sense for Jesus to entrust Mary to her nephew’s care instead of a stepson.</li>
<li>There are many who believe that Alphaeus is equivalent to Cleopas, in which case James the less would have been one of Jesus’ disciples. Others further suggest that Matthew is the same as Levi the son of Alphaus. If both of these are true (though there are several reasons to doubt this association), then as many as four of Jesus disciples would have been his cousins: Matthew, James the son of Alphaeus, James the son of Zebedee, John. Andrew and Peter would have been close friends with James and John. Therefore, a full half of Jesus’ disciples would have grown up knowing Jesus as a teenager.</li>
</ol>
<p>Assuming Jesus was the older step-brother of Jesus, we can speculate on the type of relationship that they had growing up. In Mark 3:21, as Jesus began his ministry, his family (some translations say “friends”) heard what was happening, and tried to take him away saying, “He is out of his mind.” His brothers and his mother show up in Mark 3:31 and Matthew 12:46 trying to take him away. His brothers did not believe in Jesus during his 3.5-year ministry (John 7:3-5). Chapter 9 of the Desire of Ages gives a few more glimpses into Jesus young life and the tension he experienced with his brothers.</p>
</section>
<section id="birthdate-of-john-the-evangelist" class="level2">
<h2 class="anchored" data-anchor-id="birthdate-of-john-the-evangelist">Birthdate of John the Evangelist</h2>
<p>The date of birth of Jesus is not stated in the gospels or in any historical sources, and the evidence is too incomplete to allow for consistent dating. The traditional Adventist chronology sets Jesus’ ministry as starting in the fall of AD 27, and his crucifixion in the spring of AD 31. Luke 3:23 says that Jesus was about 30 years of age at the start of his ministry, which places his birth in the fall of 4 BC (Numbers 4 and 1 Chronicles 24 state that the age of 30 is the start of priestly or other ministerial service in the tabernacle).</p>
<p>John the Baptist was 6 months older than Jesus (Luke 1:36).</p>
<p>Wikipedia states with absolutely no sources that John the Evangelist was born in 6 AD. I’ve scoured the internet to find some sort of citation for this, and wasn’t able to find anything. I asked ChatGPT to come up with an explanation. It stated that the early second-century bishop Irenaeus in <em>Against Heresies</em> speaks of John living to an old age and being present during the reign of Emperor Trajan (who ruled from 98-117 AD), which gives us some diea of his lifespan (Eusebius of Caesarea, in <em>Ecclesiastical History</em> says something similar). At the earliest, John would have died at AD 100. In order to live this long, Jesus likely could not have been born too early compared to Jesus.</p>
<p>Ellen White states that John was the youngest disciple (Desire of Ages, Chapter 20, “A Night on the Lake”)</p>
<p>The traditional age assigned to John at the beginning of Jesus’ ministry is 16-18. Working back from the fall of AD 27, this puts John’s birth date in AD 9-11.</p>
</section>
<section id="jesus-and-john-as-kids" class="level2">
<h2 class="anchored" data-anchor-id="jesus-and-john-as-kids">Jesus and John as Kids</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="jesus-and-john.png" class="img-fluid figure-img"></p>
<figcaption>John was likely Jesus’ younger cousin, by about 10 years (CC-BY)</figcaption>
</figure>
</div>
<p>From the family tree listed above, we can see that John the evangelist was Jesus’ first cousin. I believe that Jesus was much closer to his cousin John than he would have been to his half brothers through his father. There are several reasons to believe this</p>
<ol type="1">
<li>During his ministry, Jesus’ brothers claimed that Jesus was “out of his mind” (Mark 3:21)</li>
<li>When Jesus was dying on the cross, He entrusted the care of his mother Mary to John the evangelist. The responsibility of taking care of a widows was very important in Jewish law (Exodus 22:22, Deuteronomy 24:17-21). The Talmud (Mishna, Ketubot) discusses the duty of relatives to provide for widows, reinforcing that widows were to be cared for by close male relatives.</li>
</ol>
<p>Now, if Jesus began his ministry at age 30, and John became a disciple at age 18, this would have made John 12 years younger than Jesus. And while Jesus may not have found companionship among his older half brothers, it is possible that Jesus’ fondness for John as “the disciple that Jesus loved” started as early as John’s birth.</p>
<section id="on-the-way-to-the-temple" class="level3">
<h3 class="anchored" data-anchor-id="on-the-way-to-the-temple">On the Way to the Temple</h3>
<p>Luke 2:41-52 tells the story of Jesus going to the passover whe he was 12 years old. This would have occured in AD 9.</p>
<p>Verse 41 indicates that Jesus’ parents went to Jerusalem every year at the feast of the passover. The hourney from Nazareth to Jersualem is 64 miles as the crow flies, and about 91 miles by modern road system, so it would have been a 4-5 day journey. Such a journey would have been a big affair, and it was not uncommon for the journey to be taken with relatives. Jesus grew up in Nazareth, and the sons of Zebedee (James and John) lived northeast of Nazareth in Capernaum, about 40 miles away. It’s likely that Jesus and his cousins would have journeyed together to th epassover.</p>
<p>Verse 43 says that Jesus stayed behind in Jerusalem. Verse 44 says that his parents went about a day’s journey away, and then started looking for Jesus among their “kinsfolk and acquaintance” (Luke 2:44 KJV). This demonstrates that Jesus’ parents had reason to believe that Jesus was walking the entire day either with friends or family.</p>
<p>The following is speculation, but I think it harmonizes with the facts that we are given in scripture.</p>
<p>On the 5-day journey to Jerusalem, Jesus would have rendezvouzed with his aunt Salome and uncle Zebedee. Jesus was already familiar with his younger cousin James. But would have met for the first time his new baby cousin John, who may have been a toddler at this point. Ever gentle, kind, and loving Jesus would have assisted Salome in childcare.</p>
<ul>
<li><strong>Carrying John:</strong> When John grew tired from walking, Jesus may have carried him on his hip or helped guide him along the path.</li>
<li><strong>Entertainment</strong>: To keep young John engaged during the journey, Jesus could tell him stories or play simple games, helping him to bond with his younger cousin.</li>
<li><strong>Safety</strong>: Jesus would likely be mindful of keeping an eye on John, ensuring he didn’t wander off or trip on the uneven terrain.</li>
<li><strong>Bonding moments:</strong> The journey would have provided plenty of opportunities for bonding moments. As they traveled together, Jesus might teach John about the beauty of nature, point out animals, or share lessons from Scripture, setting a foundation for John’s spiritual upbringing.</li>
</ul>
</section>
<section id="at-the-wedding-at-cana" class="level3">
<h3 class="anchored" data-anchor-id="at-the-wedding-at-cana">At the Wedding at Cana</h3>
<p>John 2:1-12 also describes the first wedding that Jesus performed at the Wedding of Cana. John’s gospel is the only gospel where this miracle had been recorded. It’s possible that Jesus had not yet called all 12 of his disciples at this point, and perhaps John (being one of the first disciples to be called). The disciples that would have been at Cana may have been only the five disciples described in John 1:35-51</p>
<ol type="1">
<li>Andrew</li>
<li>Simon Peter (Andrew’s brother)</li>
<li>Philip</li>
<li>Nathanael (also known as Bartholomew)</li>
<li>John (traditionally believed to be the unnamed disciple with Andrew)</li>
</ol>
<p>Ellen White states in Desire of Ages (p.&nbsp;144-146)</p>
<blockquote class="blockquote">
<p>From the Jordan, Jesus had returned to Galilee. There was to be a marriage at Cana, a little town not far from Nazareth; the parties were relatives of Joseph and Mary; and Jesus, knowing of this family gathering, went to Cana, and with His disciples was invited to the feast.</p>
</blockquote>
<blockquote class="blockquote">
<p>As a relative of the parties, Mary had assisted in the arrangements for the feast, and she now spoke to Jesus, saying, “They have no wine.”</p>
</blockquote>
<p>This would have also made John a relative at the party.</p>
<p>The fact that certain stone jars were present that were used in purification rites, suggests that the house of this wedding was a priestly house (or at least had some concern for Jewish ritual purity). Given that Mary’s cousin Elizabeth was married to a priest, this suggests that Jesus’ family on his mothers’ side were priestly descent. There is also evidence in the gospels that John was fairly well educated and able to read and write. This would also be evidence of John being in a priestly family.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://upload.wikimedia.org/wikipedia/commons/6/66/Ancient_Galilee.jpg" class="img-fluid figure-img"></p>
<figcaption>From The Historical Atlas by William R. Shepherd (1923) <a href="https://commons.wikimedia.org/wiki/File:Ancient_Galilee.jpg">from Wikipedia</a></figcaption>
</figure>
</div>
<p>Cana was between Capernaum and Nazareth, and further suggests the geographical spread of the family.</p>
<p>This gives insight into other types of family affairs that Jesus and his cousins would have had growing up.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>